<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Кофейня "Уютная Чашка"</title>
    <style>
        /* Основные стили и переменные цветов */
        :root {
            --dark-bg: #2a1f1d;
            --dark-card: #3a2c28;
            --beige: #d7ccc8;
            --light-beige: #efebe9;
            --brown: #8d6e63;
            --accent-brown: #a1887f;
            --text-light: #f5f5f5;
            --text-dark: #5d4037;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--dark-bg);
            color: var(--text-light);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Шапка сайта */
        header {
            background-color: var(--dark-card);
            padding: 1rem 2rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--beige);
            text-decoration: none;
        }

        .logo span {
            color: var(--brown);
        }

        nav ul {
            display: flex;
            list-style: none;
        }

        nav ul li {
            margin-left: 2rem;
        }

        nav ul li a {
            color: var(--beige);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
            cursor: pointer;
        }

        nav ul li a:hover {
            color: var(--brown);
        }

        .cart-icon {
            position: relative;
            cursor: pointer;
            margin-left: 2rem;
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--brown);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }

        .menu-toggle {
            display: none;
            flex-direction: column;
            cursor: pointer;
        }

        .menu-toggle span {
            width: 25px;
            height: 3px;
            background: var(--beige);
            margin: 3px 0;
            transition: 0.3s;
        }

        /* Плавающая кнопка корзины для мобильных */
        .floating-cart {
            display: none;
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background-color: var(--brown);
            border-radius: 50%;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            z-index: 99;
            cursor: pointer;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .floating-cart:hover {
            background-color: var(--accent-brown);
            transform: scale(1.1);
        }

        .floating-cart .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: #e74c3c;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .floating-cart svg {
            width: 24px;
            height: 24px;
            fill: white;
        }

        /* Основной контент */
        .hero {
            height: 100vh;
            background: linear-gradient(rgba(42, 31, 29, 0.7), rgba(42, 31, 29, 0.7)), 
                        url('img/main_bc.jpg') no-repeat center center/cover;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 0 2rem;
            width: 100vw;
            margin-left: calc(-50vw + 50%);
            margin-right: calc(-50vw + 50%);
        }

        .hero h1 {
            font-size: clamp(2.5rem, 5vw, 4rem);
            margin-bottom: 1.5rem;
            color: var(--beige);
        }

        .hero p {
            font-size: clamp(1rem, 2.5vw, 1.3rem);
            max-width: 600px;
            margin-bottom: 2.5rem;
            color: var(--light-beige);
        }

        .btn {
            display: inline-block;
            background-color: var(--brown);
            color: var(--text-light);
            padding: 1rem 2rem;
            border: none;
            border-radius: 4px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background-color 0.3s;
            text-decoration: none;
        }

        .btn:hover {
            background-color: var(--accent-brown);
        }

        /* Секция с видами кофе */
        .coffee-section {
            padding: 5rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .section-title {
            text-align: center;
            margin-bottom: 3rem;
            font-size: clamp(2rem, 4vw, 2.8rem);
            color: var(--beige);
        }

        .section-subtitle {
            text-align: center;
            margin-bottom: 2rem;
            font-size: clamp(1.5rem, 3vw, 2rem);
            color: var(--light-beige);
            border-bottom: 2px solid var(--brown);
            padding-bottom: 0.5rem;
            margin-top: 3rem;
        }

        .coffee-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
        }

        .coffee-card {
            background-color: var(--dark-card);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .coffee-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.25);
        }

        .coffee-img {
            width: 100%;
            height: 220px;
            object-fit: cover;
            background-color: var(--brown); /* Запасной фон если изображение не загрузится */
        }

        .coffee-info {
            padding: 1.5rem;
        }

        .coffee-name {
            font-size: 1.4rem;
            margin-bottom: 0.5rem;
            color: var(--beige);
        }

        .coffee-price {
            color: var(--brown);
            font-weight: 600;
            font-size: 1.3rem;
            margin-bottom: 0.8rem;
        }

        .nutrition-info {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.5rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nutrition-item {
            text-align: center;
        }

        .nutrition-value {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--beige);
        }

        .nutrition-label {
            font-size: 0.7rem;
            color: var(--light-beige);
            opacity: 0.8;
        }

        .calories {
            color: var(--brown);
        }

        .product-badge {
            display: inline-block;
            background-color: var(--brown);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-left: 0.5rem;
            vertical-align: middle;
        }

        /* Стили для формы доставки */
        .delivery-form {
            background: rgba(141, 110, 99, 0.2);
            border-radius: 12px;
            padding: 2rem;
            margin: 1.5rem 0;
            max-width: 500px;
            width: 90%;
            max-height: 70vh;
            overflow-y: auto;
            animation: slideUp 0.8s ease 0.7s both;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            color: var(--beige);
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 0.8rem 1rem;
            background: var(--dark-card);
            border: 1px solid var(--brown);
            border-radius: 8px;
            color: var(--text-light);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-input:focus, .form-textarea:focus, .form-select:focus {
            outline: none;
            border-color: var(--accent-brown);
            box-shadow: 0 0 0 2px rgba(161, 136, 127, 0.3);
        }

        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .form-actions {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .form-btn {
            flex: 1;
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .form-btn.primary {
            background: var(--brown);
            color: white;
        }

        .form-btn.primary:hover {
            background: var(--accent-brown);
            transform: translateY(-2px);
        }

        .form-btn.secondary {
            background: transparent;
            color: var(--beige);
            border: 1px solid var(--brown);
        }

        .form-btn.secondary:hover {
            background: rgba(141, 110, 99, 0.2);
        }

        /* Анимации для формы */
        @keyframes slideInFromBottom {
            from {
                transform: translateY(30px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .delivery-form {
            animation: slideInFromBottom 0.6s ease;
        }

        /* Стили для анимации успешного заказа */
        .order-success {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(42, 31, 29, 0.95);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            text-align: center;
            padding: 2rem;
        }

        .order-success.active {
            display: flex;
        }

        .success-icon {
            width: 120px;
            height: 120px;
            background-color: var(--brown);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 2rem;
            animation: bounceIn 0.8s ease;
        }

        .success-icon::before {
            content: "✓";
            font-size: 4rem;
            color: white;
        }

        .success-title {
            font-size: 2.5rem;
            color: var(--beige);
            margin-bottom: 1rem;
        }

        .success-message {
            font-size: 1.3rem;
            color: var(--light-beige);
            margin-bottom: 2rem;
            max-width: 500px;
        }

        .success-submessage {
            font-size: 1.1rem;
            color: var(--light-beige);
            margin-bottom: 2rem;
            opacity: 0.8;
        }

        .success-btn {
            background-color: var(--brown);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 4px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .success-btn:hover {
            background-color: var(--accent-brown);
        }

        /* Модальное окно с описанием товара */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 1rem;
        }

        .modal-content {
            background-color: var(--dark-card);
            border-radius: 12px;
            max-width: 900px;
            width: 95%;
            max-height: 90vh;
            overflow-y: auto;
            padding: 2rem;
            position: relative;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
        }

        .close-modal {
            position: absolute;
            top: 1rem;
            right: 1.5rem;
            font-size: 2rem;
            cursor: pointer;
            color: var(--beige);
            transition: color 0.3s;
        }

        .close-modal:hover {
            color: var(--brown);
        }

        .modal-img {
            width: 100%;
            height: 350px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            background-color: var(--brown); /* Запасной фон */
        }

        .modal-title {
            font-size: 2.2rem;
            margin-bottom: 1rem;
            color: var(--beige);
        }

        .modal-description {
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            color: var(--light-beige);
            line-height: 1.7;
        }

        .modal-price {
            font-size: 1.6rem;
            color: var(--brown);
            font-weight: 600;
            margin-bottom: 2rem;
        }

        /* БЖУ в модальном окне */
        .modal-nutrition {
            background-color: rgba(141, 110, 99, 0.2);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .nutrition-title {
            font-size: 1.3rem;
            color: var(--beige);
            margin-bottom: 1rem;
            text-align: center;
        }

        .nutrition-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            text-align: center;
        }

        .nutrition-item-large {
            padding: 0.8rem;
        }

        .nutrition-value-large {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--beige);
            display: block;
        }

        .nutrition-label-large {
            font-size: 0.9rem;
            color: var(--light-beige);
            opacity: 0.8;
        }

        .calories-large {
            color: var(--brown);
        }

        .add-to-cart-btn {
            background-color: var(--brown);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 4px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 1rem;
            width: 100%;
        }

        .add-to-cart-btn:hover {
            background-color: var(--accent-brown);
        }

        /* Секция допингов */
        .addons-section {
            margin-top: 2.5rem;
        }

        .addons-title {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: var(--beige);
            border-bottom: 2px solid var(--brown);
            padding-bottom: 0.5rem;
        }

        .addons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 1.2rem;
        }

        .addon-item {
            background-color: rgba(141, 110, 99, 0.25);
            padding: 1.2rem;
            border-radius: 8px;
            border: 1px solid var(--brown);
            transition: transform 0.2s;
            cursor: pointer;
        }

        .addon-item:hover {
            transform: translateY(-2px);
        }

        .addon-item.selected {
            background-color: rgba(141, 110, 99, 0.5);
            border-color: var(--accent-brown);
        }

        .addon-name {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--beige);
            font-size: 1.1rem;
        }

        .addon-price {
            color: var(--light-beige);
            font-size: 1rem;
        }

        /* Страницы */
        .page {
            display: none;
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .page.active {
            display: block;
        }

        /* Страница "О нас" */
        .about-hero {
            height: 60vh;
            background: linear-gradient(rgba(42, 31, 29, 0.8), rgba(42, 31, 29, 0.8)), 
                        url('img/About_Us_Bc.jpg') no-repeat center center/cover;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 0 2rem;
            border-radius: 12px;
            margin-bottom: 3rem;
        }

        .about-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2.5rem;
            margin-bottom: 3rem;
        }

        .about-card {
            background-color: var(--dark-card);
            padding: 2rem;
            border-radius: 12px;
            text-align: center;
        }

        .about-card h3 {
            color: var(--beige);
            margin-bottom: 1rem;
            font-size: 1.4rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .stat-item {
            text-align: center;
            padding: 1.5rem;
            background-color: rgba(141, 110, 99, 0.2);
            border-radius: 8px;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--brown);
            margin-bottom: 0.5rem;
        }

        .stat-text {
            color: var(--light-beige);
            font-size: 1rem;
        }

        /* Страница корзины */
        .cart-container {
            background-color: var(--dark-card);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .cart-item:last-child {
            border-bottom: none;
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-name {
            font-size: 1.2rem;
            color: var(--beige);
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: color 0.3s;
        }

        .cart-item-name:hover {
            color: var(--brown);
        }

        .cart-item-addons {
            font-size: 0.9rem;
            color: var(--light-beige);
            margin-bottom: 0.5rem;
        }

        .cart-item-price {
            color: var(--brown);
            font-weight: 600;
        }

        .cart-item-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .quantity-btn {
            background-color: var(--brown);
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .quantity-btn:hover {
            background-color: var(--accent-brown);
        }

        .cart-total {
            text-align: right;
            font-size: 1.5rem;
            margin-top: 2rem;
            color: var(--beige);
        }

        .checkout-btn {
            background-color: var(--brown);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 4px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 1rem;
            float: right;
        }

        .checkout-btn:hover {
            background-color: var(--accent-brown);
        }

        .empty-cart {
            text-align: center;
            padding: 3rem;
            color: var(--light-beige);
        }

        /* Подвал */
        footer {
            background-color: var(--dark-card);
            padding: 3rem 2rem;
            margin-top: 3rem;
        }

        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2.5rem;
        }

        .footer-section h3 {
            margin-bottom: 1.5rem;
            color: var(--beige);
            font-size: 1.3rem;
        }

        .footer-section p, .footer-section a {
            color: var(--light-beige);
            margin-bottom: 0.8rem;
            display: block;
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-section a:hover {
            color: var(--brown);
        }

        .copyright {
            text-align: center;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.15);
            color: var(--beige);
            font-size: 1rem;
        }

        /* Кнопка возврата наверх */
        .scroll-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background-color: var(--brown);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 99;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .scroll-to-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .scroll-to-top:hover {
            background-color: var(--accent-brown);
            transform: translateY(-3px);
        }

        /* Анимации */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.1); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }

        @keyframes slideUp {
            from { 
                transform: translateY(30px);
                opacity: 0;
            }
            to { 
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes coffeeSteam {
            0%, 100% { 
                transform: translateY(0) scale(1);
                opacity: 0.8;
            }
            50% { 
                transform: translateY(-10px) scale(1.1);
                opacity: 1;
            }
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Адаптивность */
        @media (max-width: 1024px) {
            .coffee-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }
            
            .addons-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                padding: 1rem;
            }
            
            nav ul {
                margin-top: 1rem;
                flex-direction: column;
                align-items: center;
                display: none;
            }
            
            nav ul.active {
                display: flex;
            }
            
            nav ul li {
                margin: 0.5rem 0;
            }
            
            .menu-toggle {
                display: flex;
                position: absolute;
                top: 1.5rem;
                right: 1.5rem;
            }
            
            .hero {
                height: 80vh;
                padding: 0 1rem;
            }
            
            .coffee-section {
                padding: 3rem 1rem;
            }
            
            .modal-content {
                padding: 1.5rem;
                margin: 1rem;
            }
            
            .modal-img {
                height: 250px;
            }
            
            .footer-container {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
            
            .about-hero {
                height: 50vh;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .cart-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .cart-item-controls {
                align-self: flex-end;
            }

            .scroll-to-top {
                bottom: 100px; /* Поднимаем выше чтобы не мешала корзине */
                right: 20px;
                width: 45px;
                height: 45px;
            }

            /* Показываем плавающую корзину на мобильных */
            .floating-cart {
                display: flex;
            }

            /* Скрываем корзину в хедере на мобильных */
            .cart-icon {
                display: none;
            }

            .success-icon {
                width: 100px;
                height: 100px;
            }

            .success-icon::before {
                font-size: 3rem;
            }

            .nutrition-info {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.8rem;
            }

            .nutrition-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .hero h1 {
                font-size: 2rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
            
            .coffee-grid {
                grid-template-columns: 1fr;
            }
            
            .addons-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                padding: 1rem;
            }
            
            .modal-title {
                font-size: 1.8rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .scroll-to-top {
                bottom: 90px;
                right: 15px;
                width: 40px;
                height: 40px;
            }

            .floating-cart {
                bottom: 20px;
                right: 20px;
                width: 55px;
                height: 55px;
            }

            .success-icon {
                width: 80px;
                height: 80px;
            }

            .success-icon::before {
                font-size: 2.5rem;
            }

            .success-title {
                font-size: 1.8rem;
            }

            .success-message {
                font-size: 1.1rem;
            }

            .nutrition-info {
                grid-template-columns: repeat(2, 1fr);
            }

            .nutrition-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Шапка сайта -->
    <header>
        <div class="header-container">
            <a href="#" class="logo" onclick="showPage('home')">Уютная <span>Чашка</span></a>
            <div class="menu-toggle" id="menuToggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <nav>
                <ul id="navMenu">
                    <li><a onclick="showPage('home')">Главная</a></li>
                    <li><a onclick="showPage('menu')">Меню</a></li>
                    <li><a onclick="showPage('about')">О нас</a></li>
                    <li class="cart-icon" onclick="showPage('cart')">
                        🛒
                        <span class="cart-count" id="cartCount">0</span>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Плавающая кнопка корзины для мобильных -->
    <div class="floating-cart" id="floatingCart" onclick="showPage('cart')">
        <div class="cart-count" id="floatingCartCount">0</div>
        <svg viewBox="0 0 24 24">
            <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49A1.003 1.003 0 0 0 20 4H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/>
        </svg>
    </div>

    <!-- Основной контент -->
    <main>
        <!-- Главная страница -->
        <section id="home" class="page active">
            <!-- Герой-секция -->
            <section class="hero">
                <h1>Насладитесь идеальной чашкой кофе</h1>
                <p>Погрузитесь в мир ароматов и вкусов в нашей уютной кофейне, где каждая чашка - это произведение искусства</p>
                <a onclick="showPage('menu')" class="btn">Посмотреть меню</a>
            </section>

            <!-- Секция с популярными напитками -->
            <section class="coffee-section" id="coffee">
                <h2 class="section-title">Самые популярные напитки</h2>
                <div class="coffee-grid" id="popularCoffeeGrid">
                    <!-- 6 самых популярных видов кофе -->
                </div>
            </section>

            <!-- Секция с популярными десертами -->
            <section class="coffee-section" id="desserts">
                <h2 class="section-title">Популярные десерты</h2>
                <div class="coffee-grid" id="popularDessertsGrid">
                    <!-- 2 самых популярных десерта -->
                </div>
            </section>
        </section>

        <!-- Страница меню (объединенная) -->
        <section id="menu" class="page">
            <div class="coffee-section">
                <h2 class="section-title">Наше меню</h2>
                
                <!-- Кофе -->
                <h3 class="section-subtitle">Кофейные напитки</h3>
                <div class="coffee-grid" id="fullCoffeeGrid">
                    <!-- Все виды кофе -->
                </div>

                <!-- Десерты -->
                <h3 class="section-subtitle">Десерты</h3>
                <div class="coffee-grid" id="fullDessertsGrid">
                    <!-- Все десерты -->
                </div>
            </div>
        </section>

        <!-- Страница "О нас" -->
        <section id="about" class="page">
            <div class="coffee-section">
                <div class="about-hero">
                    <h2 class="section-title">О нашей кофейне</h2>
                    <p style="font-size: 1.2rem; max-width: 600px; color: var(--light-beige);">
                        С 2015 года создаем уютные моменты для наших гостей
                    </p>
                </div>
                
                <div class="about-content">
                    <div class="about-card">
                        <h3>Наша философия</h3>
                        <p>Мы верим, что идеальная чашка кофе - это не просто напиток, а целое искусство. 
                           Каждый день мы отбираем лучшие зерна со всего мира и создаем неповторимую 
                           атмосферу уюта и тепла.</p>
                    </div>
                    
                    <div class="about-card">
                        <h3>Мастера своего дела</h3>
                        <p>Наши бариста проходят специальное обучение у лучших кофейных экспертов. 
                           Они постоянно совершенствуют свои навыки, чтобы каждая чашка кофе, 
                           которую мы готовим, была идеальной.</p>
                    </div>
                    
                    <div class="about-card">
                        <h3>Экологичность</h3>
                        <p>Мы заботимся о природе: используем биоразлагаемые стаканчики, 
                           перерабатываем отходы и поддерживаем фермеров, которые выращивают 
                           кофе с соблюдением экологических стандартов.</p>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-number">10+</div>
                        <div class="stat-text">Лет на рынке</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">2М+</div>
                        <div class="stat-text">Довольных клиентов</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">15</div>
                        <div class="stat-text">Видов кофе</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">100%</div>
                        <div class="stat-text">Натуральные продукты</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Страница корзины -->
        <section id="cart" class="page">
            <div class="coffee-section">
                <h2 class="section-title">Корзина</h2>
                <div class="cart-container" id="cartContainer">
                    <!-- Товары в корзине будут добавляться сюда -->
                </div>
                <div class="cart-total" id="cartTotal">
                    Итого: 0 ₽
                </div>
                <button class="checkout-btn" onclick="checkout()">Оформить заказ</button>
            </div>
        </section>
    </main>

    <!-- Анимация успешного заказа с формой доставки -->
    <div class="order-success" id="orderSuccess">
        <div class="success-icon"></div>
        <h1 class="success-title">Заказ принят! 🎉</h1>
        <p class="success-message" id="successMessage">Ваш кофе уже готовится и скоро будет у вас!</p>
        
        <!-- Форма данных доставки -->
        <div class="delivery-form" id="deliveryForm">
            <h3 style="color: var(--beige); margin-bottom: 1.5rem; text-align: center;">Данные для доставки</h3>
            
            <div class="form-group">
                <label for="customerName">Ваше имя</label>
                <input type="text" id="customerName" placeholder="Введите ваше имя" class="form-input">
            </div>
            
            <div class="form-group">
                <label for="customerPhone">Номер телефона</label>
                <input type="tel" id="customerPhone" placeholder="+7 (XXX) XXX-XX-XX" class="form-input">
            </div>
            
            <div class="form-group">
                <label for="deliveryAddress">Адрес доставки</label>
                <textarea id="deliveryAddress" placeholder="Введите полный адрес доставки" class="form-textarea" rows="3"></textarea>
            </div>
            
            <div class="form-group">
                <label for="deliveryTime">Время доставки</label>
                <select id="deliveryTime" class="form-select">
                    <option value="asap">Как можно скорее</option>
                    <option value="30min">В течение 30 минут</option>
                    <option value="1hour">В течение 1 часа</option>
                    <option value="specific">Указать точное время</option>
                </select>
            </div>
            
            <div class="form-group" id="specificTimeGroup" style="display: none;">
                <label for="specificTime">Точное время</label>
                <input type="time" id="specificTime" class="form-input">
            </div>
            
            <div class="form-group">
                <label for="orderComments">Комментарий к заказу</label>
                <textarea id="orderComments" placeholder="Дополнительные пожелания..." class="form-textarea" rows="2"></textarea>
            </div>
            
            <!-- БЖУ заказа -->
            <div class="order-nutrition" id="orderNutrition" style="margin-bottom: 2rem; text-align: center;">
                <!-- БЖУ заказа будет здесь -->
            </div>
            
            <div class="form-actions">
                <button class="form-btn secondary" onclick="closeOrderSuccess()">Отмена</button>
                <button class="form-btn primary" onclick="confirmOrder()">Подтвердить заказ</button>
            </div>
        </div>
        
        <p class="success-submessage">Наслаждайтесь каждым глотком ☕</p>
        <button class="success-btn" onclick="closeOrderSuccess()">Продолжить покупки</button>
    </div>

    <!-- Кнопка возврата наверх -->
    <div class="scroll-to-top" id="scrollToTop" onclick="scrollToTop()">
        ↑
    </div>

    <!-- Подвал -->
    <footer>
        <div class="footer-container">
            <div class="footer-section">
                <h3>О нас</h3>
                <p>Мы создаем уютное пространство, где каждый может насладиться качественным кофе и приятной атмосферой.</p>
            </div>
            <div class="footer-section">
                <h3>Контакты</h3>
                <p>г. Уфа, ул. Ухтомского, 29</p>
                <p>+7 (996) 256-09-63</p>
                <p>+7 (927) 925-50-06</p>
                <p>Kykymber431@gmail.com</p>
                <p>hubgit910@gmail.com</p>
            </div>
            <div class="footer-section">
                <h3>Часы работы</h3>
                <p>Пн-Пт: 9:00 - 21:00</p>
                <p>Сб-Вс: 10:00 - 21:00</p>
            </div>
        </div>
        <div class="copyright">
            <p>&copy; 2015 Кофейня "Уютная Чашка". Все права защищены.</p>
        </div>
    </footer>

    <!-- Модальное окно с описанием товара -->
    <div class="modal" id="coffeeModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <img id="modalImg" src="" alt="" class="modal-img">
            <h2 id="modalTitle" class="modal-title"></h2>
            <p id="modalDescription" class="modal-description"></p>
            <p id="modalPrice" class="modal-price"></p>
            
            <!-- БЖУ в модальном окне -->
            <div class="modal-nutrition">
                <h3 class="nutrition-title">Пищевая ценность</h3>
                <div class="nutrition-grid" id="modalNutritionGrid">
                    <!-- БЖУ будут добавляться сюда -->
                </div>
            </div>
            
            <!-- Секция допингов -->
            <div class="addons-section">
                <h3 class="addons-title">Дополнительные опции</h3>
                <div class="addons-grid" id="addonsGrid">
                    <!-- Допинги будут добавляться сюда -->
                </div>
            </div>

            <button class="add-to-cart-btn" id="addToCartBtn">Добавить в корзину</button>
        </div>
    </div>

    <script>
        // База данных допингов с БЖУ
        const addonsData = {
            "Двойная порция": { price: 120, nutrition: { calories: 5, protein: 0.3, fat: 0.1, carbs: 0.7 } },
            "Сироп ванильный": { price: 60, nutrition: { calories: 40, protein: 0, fat: 0, carbs: 10 } },
            "Сироп карамельный": { price: 60, nutrition: { calories: 45, protein: 0, fat: 0, carbs: 11 } },
            "Взбитые сливки": { price: 80, nutrition: { calories: 50, protein: 1, fat: 5, carbs: 1 } },
            "Корица": { price: 30, nutrition: { calories: 6, protein: 0.1, fat: 0, carbs: 2 } },
            "Мускатный орех": { price: 40, nutrition: { calories: 12, protein: 0.1, fat: 0.8, carbs: 1.1 } },
            "Сироп кленовый": { price: 60, nutrition: { calories: 52, protein: 0, fat: 0, carbs: 13 } },
            "Шоколадная крошка": { price: 50, nutrition: { calories: 70, protein: 1, fat: 4, carbs: 8 } },
            "Экстра порция молока": { price: 40, nutrition: { calories: 60, protein: 3, fat: 3, carbs: 5 } },
            "Карамельный соус": { price: 50, nutrition: { calories: 90, protein: 0.5, fat: 3, carbs: 15 } },
            "Тертый шоколад": { price: 45, nutrition: { calories: 55, protein: 1, fat: 3, carbs: 6 } },
            "Сироп миндальный": { price: 60, nutrition: { calories: 40, protein: 0, fat: 0, carbs: 10 } },
            "Кокосовое молоко": { price: 80, nutrition: { calories: 45, protein: 0.5, fat: 4.5, carbs: 2 } },
            "Карамельная крошка": { price: 50, nutrition: { calories: 80, protein: 0.5, fat: 2, carbs: 15 } },
            "Ванильный сироп": { price: 60, nutrition: { calories: 40, protein: 0, fat: 0, carbs: 10 } },
            "Фундучный сироп": { price: 60, nutrition: { calories: 45, protein: 0.5, fat: 2, carbs: 8 } },
            "Лимон": { price: 30, nutrition: { calories: 4, protein: 0.1, fat: 0, carbs: 1.3 } },
            "Сироп апельсиновый": { price: 60, nutrition: { calories: 42, protein: 0, fat: 0, carbs: 10.5 } },
            "Мед": { price: 40, nutrition: { calories: 64, protein: 0.1, fat: 0, carbs: 17 } },
            "Имбирь": { price: 35, nutrition: { calories: 5, protein: 0.1, fat: 0.1, carbs: 1.1 } },
            "Гвоздика": { price: 35, nutrition: { calories: 6, protein: 0.1, fat: 0.3, carbs: 1.4 } },
            "Белый шоколад": { price: 80, nutrition: { calories: 145, protein: 2, fat: 9, carbs: 15 } },
            "Мятный сироп": { price: 60, nutrition: { calories: 40, protein: 0, fat: 0, carbs: 10 } },
            "Маршмеллоу": { price: 50, nutrition: { calories: 90, protein: 0.5, fat: 0, carbs: 23 } },
            "Тертый арахис": { price: 55, nutrition: { calories: 85, protein: 4, fat: 7, carbs: 3 } },
            "Кокосовые сливки": { price: 90, nutrition: { calories: 50, protein: 0.5, fat: 5, carbs: 2 } },
            "Коричневый сахар": { price: 30, nutrition: { calories: 45, protein: 0, fat: 0, carbs: 11.5 } },
            "Ванильный экстракт": { price: 50, nutrition: { calories: 35, protein: 0, fat: 0, carbs: 1.5 } },
            "Кленовый сироп": { price: 60, nutrition: { calories: 52, protein: 0, fat: 0, carbs: 13 } },
            "Дополнительная порция эспрессо": { price: 120, nutrition: { calories: 5, protein: 0.3, fat: 0.1, carbs: 0.7 } },
            "Сироп ирландский крем": { price: 70, nutrition: { calories: 65, protein: 0.5, fat: 2, carbs: 11 } },
            "Цедра апельсина": { price: 35, nutrition: { calories: 6, protein: 0.1, fat: 0, carbs: 1.5 } },
            "Ванильный сахар": { price: 25, nutrition: { calories: 40, protein: 0, fat: 0, carbs: 10 } },
            "Ванильное мороженое": { price: 100, nutrition: { calories: 140, protein: 3, fat: 7, carbs: 17 } },
            "Шоколадный соус": { price: 50, nutrition: { calories: 85, protein: 1, fat: 3, carbs: 15 } },
            "Карамельная пенка": { price: 70, nutrition: { calories: 60, protein: 1, fat: 4, carbs: 5 } },
            "Кардамон": { price: 40, nutrition: { calories: 6, protein: 0.2, fat: 0.4, carbs: 1.3 } },
            "Роза": { price: 50, nutrition: { calories: 3, protein: 0, fat: 0, carbs: 0.6 } },
            "Фисташки": { price: 60, nutrition: { calories: 80, protein: 3, fat: 7, carbs: 4 } }
        };

        // Полная база данных кофе с допингами и БЖУ
        const coffeeData = {
            1: {
                name: "Эспрессо",
                image: "img/espresso.jpg",
                description: "Классический итальянский эспрессо - крепкий, насыщенный кофе с плотной пенкой. Идеальный выбор для настоящих ценителей кофе. Подается в маленькой чашке для максимального сохранения аромата.",
                price: 290,
                nutrition: {
                    calories: 5,
                    protein: 0.3,
                    fat: 0.1,
                    carbs: 0.7
                },
                addons: [
                    "Двойная порция",
                    "Сироп ванильный",
                    "Сироп карамельный",
                    "Взбитые сливки",
                    "Корица",
                    "Мускатный орех"
                ]
            },
            2: {
                name: "Капучино",
                image: "img/Capuchino.jpg",
                description: "Идеальное сочетание эспрессо, молока и молочной пенки. Наш бариста создает нежную пенку, которая сохраняет температуру напитка и подчеркивает вкус кофе. Украшается рисунком на пенке.",
                price: 350,
                nutrition: {
                    calories: 120,
                    protein: 6.5,
                    fat: 5.2,
                    carbs: 9.8
                },
                addons: [
                    "Корица",
                    "Сироп кленовый",
                    "Шоколадная крошка",
                    "Экстра порция молока",
                    "Карамельный соус",
                    "Тертый шоколад"
                ]
            },
            3: {
                name: "Латте",
                image: "img/Late.jpg",
                description: "Нежный кофейный напиток на основе эспрессо с большим количеством вспененного молока. Имеет мягкий вкус и кремовую текстуру. Идеален для тех, кто предпочитает менее крепкий кофе.",
                price: 380,
                nutrition: {
                    calories: 180,
                    protein: 9.2,
                    fat: 7.8,
                    carbs: 15.3
                },
                addons: [
                    "Сироп миндальный",
                    "Кокосовое молоко",
                    "Мускатный орех",
                    "Карамельная крошка",
                    "Ванильный сироп",
                    "Фундучный сироп"
                ]
            },
            4: {
                name: "Американо",
                image: "img/Amerikano.jpg",
                description: "Эспрессо, разбавленный горячей водой. Сохраняет насыщенный вкус и аромат кофе, но имеет меньшую крепость. Отличный выбор для длительного наслаждения кофе.",
                price: 310,
                nutrition: {
                    calories: 15,
                    protein: 0.5,
                    fat: 0.2,
                    carbs: 2.1
                },
                addons: [
                    "Лимон",
                    "Сироп апельсиновый",
                    "Мед",
                    "Имбирь",
                    "Корица",
                    "Гвоздика"
                ]
            },
            5: {
                name: "Моккачино",
                image: "img/Moccachino.jpg",
                description: "Восхитительное сочетание эспрессо, шоколада и молока. Наш моккачино готовится с использованием качественного какао и украшается взбитыми сливками. Настоящее удовольствие для сладкоежек.",
                price: 420,
                nutrition: {
                    calories: 290,
                    protein: 8.5,
                    fat: 12.3,
                    carbs: 35.7
                },
                addons: [
                    "Белый шоколад",
                    "Мятный сироп",
                    "Маршмеллоу",
                    "Шоколадная стружка",
                    "Карамельный соус",
                    "Тертый арахис"
                ]
            },
            6: {
                name: "Раф кофе",
                image: "img/Raf.jpg",
                description: "Популярный российский кофейный напиток, приготовленный на основе эспрессо, сливок и ванильного сахара. Взбивается в питчере до образования нежной пенки. Имеет мягкий сливочный вкус.",
                price: 450,
                nutrition: {
                    calories: 210,
                    protein: 4.8,
                    fat: 15.6,
                    carbs: 18.9
                },
                addons: [
                    "Кокосовые сливки",
                    "Сироп фундука",
                    "Коричневый сахар",
                    "Ванильный экстракт",
                    "Мед",
                    "Кленовый сироп"
                ]
            },
            7: {
                name: "Флэт Уайт",
                image: "img/Flat_White.jpg",
                description: "Австралийский кофейный напиток с двойной порцией эспрессо и тонким слоем микрофомы. Более крепкий, чем латте, с насыщенным кофейным вкусом.",
                price: 390,
                nutrition: {
                    calories: 135,
                    protein: 7.8,
                    fat: 6.4,
                    carbs: 11.2
                },
                addons: [
                    "Дополнительная порция эспрессо",
                    "Сироп ирландский крем",
                    "Цедра апельсина",
                    "Корица",
                    "Ванильный сахар"
                ]
            },
            8: {
                name: "Айс Латте",
                image: "img/Icejpg",
                description: "Освежающий холодный кофейный напиток на основе эспрессо и охлажденного молока. Подается со льдом, идеален в жаркую погоду.",
                price: 370,
                nutrition: {
                    calories: 160,
                    protein: 8.1,
                    fat: 6.9,
                    carbs: 14.5
                },
                addons: [
                    "Карамельный сироп",
                    "Мятный сироп",
                    "Ванильное мороженое",
                    "Шоколадный соус",
                    "Кокосовое молоко"
                ]
            },
            9: {
                name: "Макиато",
                image: "img/Macchiato.jpg",
                description: "Эспрессо с небольшим количеством молочной пенки. Сохраняет крепость эспрессо, но с более мягким вкусом благодаря пенке.",
                price: 320,
                nutrition: {
                    calories: 25,
                    protein: 1.8,
                    fat: 1.2,
                    carbs: 2.4
                },
                addons: [
                    "Карамельная пенка",
                    "Шоколадная стружка",
                    "Корица",
                    "Ванильный сироп"
                ]
            },
            10: {
                name: "Кофе по-турецки",
                image: "img/Tyrish.jpg",
                description: "Традиционный турецкий кофе, приготовленный в джезве. Имеет насыщенный вкус и аромат, подается с осадком.",
                price: 280,
                nutrition: {
                    calories: 8,
                    protein: 0.4,
                    fat: 0.2,
                    carbs: 1.3
                },
                addons: [
                    "Кардамон",
                    "Гвоздика",
                    "Мед",
                    "Роза",
                    "Фисташки"
                ]
            }
        };

        // База данных десертов с БЖУ
        const dessertsData = {
            1: {
                name: "Тирамису",
                image: "img/Tiramisu.jpg",
                description: "Классический итальянский десерт из печенья савоярди, пропитанного эспрессо, с нежным кремом маскарпоне и какао.",
                price: 450,
                nutrition: {
                    calories: 420,
                    protein: 8.9,
                    fat: 24.7,
                    carbs: 45.3
                }
            },
            2: {
                name: "Чизкейк Нью-Йорк",
                image: "img/Cake_NY.jpg",
                description: "Нежный сливочный чизкейк с песочной основой. Подается с ягодным соусом на выбор.",
                price: 380,
                nutrition: {
                    calories: 380,
                    protein: 7.2,
                    fat: 22.5,
                    carbs: 38.9
                }
            },
            3: {
                name: "Круассан с шоколадом",
                image: "img/Cryasan.jpg",
                description: "Свежий слоеный круассан с начинкой из бельгийского шоколада. Идеально сочетается с кофе.",
                price: 220,
                nutrition: {
                    calories: 280,
                    protein: 5.8,
                    fat: 15.4,
                    carbs: 32.1
                }
            },
            4: {
                name: "Макаруны",
                image: "img/Mc.jpg",
                description: "Набор из 4-х нежных французских пирожных с различными вкусами: ваниль, шоколад, малина, фисташка.",
                price: 320,
                nutrition: {
                    calories: 360,
                    protein: 4.2,
                    fat: 16.8,
                    carbs: 52.4
                }
            },
            5: {
                name: "Брауни",
                image: "img/brayni.jpg",
                description: "Шоколадный брауни с орехами пекан, подается теплым с шариком ванильного мороженого.",
                price: 350,
                nutrition: {
                    calories: 410,
                    protein: 6.5,
                    fat: 23.8,
                    carbs: 48.2
                }
            },
            6: {
                name: "Медовик",
                image: "img/medovik.jpg",
                description: "Традиционный русский торт из медовых коржей со сметанным кремом.",
                price: 280,
                nutrition: {
                    calories: 320,
                    protein: 5.1,
                    fat: 14.6,
                    carbs: 43.8
                }
            }
        };

        // Переменные для состояния приложения
        let cart = [];
        let currentCoffee = null;
        let selectedAddons = [];
        let isViewMode = false; // Флаг для режима просмотра из корзины

        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            setupEventListeners();
            setupScrollToTop();
        });

        // Инициализация приложения
        function initializeApp() {
            renderPopularCoffee();
            renderPopularDesserts();
            renderFullCoffeeMenu();
            renderFullDessertsMenu();
            updateCartCount();
        }

        // Настройка обработчиков событий
        function setupEventListeners() {
            // Обработчик для поля телефона (маска)
            document.getElementById('customerPhone')?.addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                if (value.startsWith('7') || value.startsWith('8')) {
                    value = value.substring(1);
                }
                if (value.length > 0) {
                    value = '+7 (' + value;
                    if (value.length > 7) value = value.substring(0, 7) + ') ' + value.substring(7);
                    if (value.length > 12) value = value.substring(0, 12) + '-' + value.substring(12);
                    if (value.length > 15) value = value.substring(0, 15) + '-' + value.substring(15);
                }
                e.target.value = value;
            });
            
            // Обработчик для выбора времени доставки
            document.getElementById('deliveryTime')?.addEventListener('change', function() {
                const specificTimeGroup = document.getElementById('specificTimeGroup');
                if (this.value === 'specific') {
                    specificTimeGroup.style.display = 'block';
                } else {
                    specificTimeGroup.style.display = 'none';
                }
            });

            // Закрытие модального окна
            document.querySelector('.close-modal').addEventListener('click', closeModal);
            document.getElementById('coffeeModal').addEventListener('click', function(e) {
                if (e.target === this) closeModal();
            });

            // Мобильное меню
            document.getElementById('menuToggle').addEventListener('click', toggleMobileMenu);

            // Добавление в корзину
            document.getElementById('addToCartBtn').addEventListener('click', addToCart);
        }

        // Настройка кнопки возврата наверх
        function setupScrollToTop() {
            const scrollToTopBtn = document.getElementById('scrollToTop');
            
            window.addEventListener('scroll', function() {
                if (window.pageYOffset > 300) {
                    scrollToTopBtn.classList.add('visible');
                } else {
                    scrollToTopBtn.classList.remove('visible');
                }
            });
        }

        // Прокрутка наверх страницы
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // Показать/скрыть мобильное меню
        function toggleMobileMenu() {
            const navMenu = document.getElementById('navMenu');
            navMenu.classList.toggle('active');
        }

        // Показать страницу
        function showPage(pageId) {
            // Скрыть все страницы
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Показать выбранную страницу
            document.getElementById(pageId).classList.add('active');
            
            // Закрыть мобильное меню если открыто
            document.getElementById('navMenu').classList.remove('active');
            
            // Обновить корзину если открыта страница корзины
            if (pageId === 'cart') {
                renderCart();
            }
            
            // Прокрутить наверх страницы
            scrollToTop();
        }

        // Рендер популярных видов кофе (6 штук)
        function renderPopularCoffee() {
            const grid = document.getElementById('popularCoffeeGrid');
            grid.innerHTML = '';
            
            Object.keys(coffeeData).slice(0, 6).forEach(id => {
                const coffee = coffeeData[id];
                grid.appendChild(createCoffeeCard(coffee, id));
            });
        }

        // Рендер популярных десертов (2 штуки)
        function renderPopularDesserts() {
            const grid = document.getElementById('popularDessertsGrid');
            grid.innerHTML = '';
            
            Object.keys(dessertsData).slice(0, 2).forEach(id => {
                const dessert = dessertsData[id];
                const card = createDessertCard(dessert, id);
                grid.appendChild(card);
            });
        }

        // Рендер полного меню кофе
        function renderFullCoffeeMenu() {
            const grid = document.getElementById('fullCoffeeGrid');
            grid.innerHTML = '';
            
            Object.keys(coffeeData).forEach(id => {
                const coffee = coffeeData[id];
                grid.appendChild(createCoffeeCard(coffee, id));
            });
        }

        // Рендер полного меню десертов
        function renderFullDessertsMenu() {
            const grid = document.getElementById('fullDessertsGrid');
            grid.innerHTML = '';
            
            Object.keys(dessertsData).forEach(id => {
                const dessert = dessertsData[id];
                const card = createDessertCard(dessert, id);
                grid.appendChild(card);
            });
        }

        // Создание карточки кофе
        function createCoffeeCard(coffee, id) {
            const card = document.createElement('div');
            card.className = 'coffee-card';
            card.innerHTML = `
                <img src="${coffee.image}" alt="${coffee.name}" class="coffee-img" onerror="this.style.backgroundColor='var(--brown)'; this.alt='Изображение временно недоступно'">
                <div class="coffee-info">
                    <h3 class="coffee-name">${coffee.name}</h3>
                    <p class="coffee-price">${coffee.price} ₽</p>
                    <div class="nutrition-info">
                        <div class="nutrition-item">
                            <div class="nutrition-value calories">${coffee.nutrition.calories}</div>
                            <div class="nutrition-label">ккал</div>
                        </div>
                        <div class="nutrition-item">
                            <div class="nutrition-value">${coffee.nutrition.protein}г</div>
                            <div class="nutrition-label">белки</div>
                        </div>
                        <div class="nutrition-item">
                            <div class="nutrition-value">${coffee.nutrition.fat}г</div>
                            <div class="nutrition-label">жиры</div>
                        </div>
                        <div class="nutrition-item">
                            <div class="nutrition-value">${coffee.nutrition.carbs}г</div>
                            <div class="nutrition-label">углеводы</div>
                        </div>
                    </div>
                </div>
            `;
            card.addEventListener('click', () => openCoffeeModal(coffee, id));
            return card;
        }

        // Создание карточки десерта
        function createDessertCard(dessert, id) {
            const card = document.createElement('div');
            card.className = 'coffee-card';
            card.innerHTML = `
                <img src="${dessert.image}" alt="${dessert.name}" class="coffee-img" onerror="this.style.backgroundColor='var(--brown)'; this.alt='Изображение временно недоступно'">
                <div class="coffee-info">
                    <h3 class="coffee-name">${dessert.name}</h3>
                    <p class="coffee-price">${dessert.price} ₽</p>
                    <div class="nutrition-info">
                        <div class="nutrition-item">
                            <div class="nutrition-value calories">${dessert.nutrition.calories}</div>
                            <div class="nutrition-label">ккал</div>
                        </div>
                        <div class="nutrition-item">
                            <div class="nutrition-value">${dessert.nutrition.protein}г</div>
                            <div class="nutrition-label">белки</div>
                        </div>
                        <div class="nutrition-item">
                            <div class="nutrition-value">${dessert.nutrition.fat}г</div>
                            <div class="nutrition-label">жиры</div>
                        </div>
                        <div class="nutrition-item">
                            <div class="nutrition-value">${dessert.nutrition.carbs}г</div>
                            <div class="nutrition-label">углеводы</div>
                        </div>
                    </div>
                </div>
            `;
            card.addEventListener('click', () => openDessertModal(dessert, id));
            return card;
        }

        // Открыть модальное окно кофе
        function openCoffeeModal(coffee, id) {
            currentCoffee = { ...coffee, id, type: 'coffee' };
            selectedAddons = [];
            isViewMode = false;
            
            document.getElementById('modalImg').src = coffee.image;
            document.getElementById('modalImg').onerror = function() {
                this.style.backgroundColor = 'var(--brown)';
                this.alt = 'Изображение временно недоступно';
            };
            document.getElementById('modalTitle').textContent = coffee.name;
            document.getElementById('modalDescription').textContent = coffee.description;
            document.getElementById('modalPrice').textContent = `${coffee.price} ₽`;
            
            // Рендерим БЖУ (сначала только кофе)
            renderNutrition(coffee.nutrition);
            
            // Показываем кнопку добавления в корзину
            document.getElementById('addToCartBtn').style.display = 'block';
            document.getElementById('addToCartBtn').textContent = 'Добавить в корзину';
            document.getElementById('addToCartBtn').onclick = addToCart;
            
            renderAddons(coffee.addons);
            document.getElementById('coffeeModal').style.display = 'flex';
        }

        // Открыть модальное окно десерта
        function openDessertModal(dessert, id) {
            currentCoffee = { ...dessert, id, type: 'dessert' };
            isViewMode = false;
            
            document.getElementById('modalImg').src = dessert.image;
            document.getElementById('modalImg').onerror = function() {
                this.style.backgroundColor = 'var(--brown)';
                this.alt = 'Изображение временно недоступно';
            };
            document.getElementById('modalTitle').textContent = dessert.name;
            document.getElementById('modalDescription').textContent = dessert.description;
            document.getElementById('modalPrice').textContent = `${dessert.price} ₽`;
            
            // Рендерим БЖУ
            renderNutrition(dessert.nutrition);
            
            // Показываем кнопку добавления в корзину
            document.getElementById('addToCartBtn').style.display = 'block';
            document.getElementById('addToCartBtn').textContent = 'Добавить в корзину';
            document.getElementById('addToCartBtn').onclick = addToCart;
            
            // Скрыть секцию с допингами для десертов
            document.querySelector('.addons-section').style.display = 'none';
            document.getElementById('coffeeModal').style.display = 'flex';
        }

        // Рендер БЖУ в модальном окне (с учетом допингов)
        function renderNutrition(baseNutrition) {
            const grid = document.getElementById('modalNutritionGrid');
            grid.innerHTML = '';
            
            // Рассчитываем общее БЖУ с учетом выбранных допингов
            let totalNutrition = {
                calories: baseNutrition.calories,
                protein: baseNutrition.protein,
                fat: baseNutrition.fat,
                carbs: baseNutrition.carbs
            };
            
            // Добавляем БЖУ выбранных допингов
            selectedAddons.forEach(addonName => {
                const addon = addonsData[addonName];
                if (addon && addon.nutrition) {
                    totalNutrition.calories += addon.nutrition.calories;
                    totalNutrition.protein += addon.nutrition.protein;
                    totalNutrition.fat += addon.nutrition.fat;
                    totalNutrition.carbs += addon.nutrition.carbs;
                }
            });
            
            const nutritionData = [
                { value: totalNutrition.calories, label: 'ккал', className: 'calories-large' },
                { value: totalNutrition.protein.toFixed(1) + 'г', label: 'Белки' },
                { value: totalNutrition.fat.toFixed(1) + 'г', label: 'Жиры' },
                { value: totalNutrition.carbs.toFixed(1) + 'г', label: 'Углеводы' }
            ];
            
            nutritionData.forEach(item => {
                const nutritionElement = document.createElement('div');
                nutritionElement.className = 'nutrition-item-large';
                nutritionElement.innerHTML = `
                    <span class="nutrition-value-large ${item.className || ''}">${item.value}</span>
                    <span class="nutrition-label-large">${item.label}</span>
                `;
                grid.appendChild(nutritionElement);
            });
        }

        // Рендер допингов
        function renderAddons(addons) {
            const grid = document.getElementById('addonsGrid');
            grid.innerHTML = '';
            
            addons.forEach((addonName, index) => {
                const addon = addonsData[addonName];
                const addonElement = document.createElement('div');
                addonElement.className = 'addon-item';
                addonElement.innerHTML = `
                    <div class="addon-name">${addonName}</div>
                    <div class="addon-price">+${addon.price} ₽</div>
                `;
                
                if (!isViewMode) {
                    // В обычном режиме - можно выбирать допинги
                    addonElement.addEventListener('click', () => toggleAddon(addonElement, addonName, index));
                } else {
                    // В режиме просмотра - нельзя выбирать
                    addonElement.style.cursor = 'default';
                }
                
                grid.appendChild(addonElement);
            });
            
            // Показать секцию с допингами
            document.querySelector('.addons-section').style.display = 'block';
        }

        // Переключить выбор допинга
        function toggleAddon(element, addonName, index) {
            if (isViewMode) return; // В режиме просмотра нельзя менять допинги
            
            element.classList.toggle('selected');
            
            if (element.classList.contains('selected')) {
                selectedAddons.push(addonName);
            } else {
                selectedAddons = selectedAddons.filter(a => a !== addonName);
            }
            
            updateModalPrice();
            // Обновляем БЖУ с учетом выбранных допингов
            renderNutrition(currentCoffee.nutrition);
        }

        // Обновить цену в модальном окне
        function updateModalPrice() {
            let totalPrice = currentCoffee.price;
            selectedAddons.forEach(addonName => {
                totalPrice += addonsData[addonName].price;
            });
            document.getElementById('modalPrice').textContent = `${totalPrice} ₽`;
        }

        // Закрыть модальное окно
        function closeModal() {
            document.getElementById('coffeeModal').style.display = 'none';
            selectedAddons = [];
            currentCoffee = null;
            isViewMode = false;
            
            // Восстанавливаем кнопку добавления в корзину
            document.getElementById('addToCartBtn').style.display = 'block';
            document.getElementById('addToCartBtn').textContent = 'Добавить в корзину';
            document.getElementById('addToCartBtn').onclick = addToCart;
        }

        // Добавить в корзину
        function addToCart() {
            if (!currentCoffee) return;
            
            let totalPrice = currentCoffee.price;
            selectedAddons.forEach(addonName => {
                totalPrice += addonsData[addonName].price;
            });
            
            const cartItem = {
                id: Date.now(),
                product: currentCoffee,
                addons: [...selectedAddons],
                quantity: 1,
                totalPrice: totalPrice
            };
            
            cart.push(cartItem);
            updateCartCount();
            closeModal();
            
            // Показать уведомление
            showNotification(`${currentCoffee.name} добавлен в корзину!`);
        }

        // Показать уведомление
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background-color: var(--brown);
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 8px;
                z-index: 10000;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Обновить счетчик корзины
        function updateCartCount() {
            const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
            document.getElementById('cartCount').textContent = totalItems;
            document.getElementById('floatingCartCount').textContent = totalItems;
        }

        // Рендер корзины
        function renderCart() {
            const container = document.getElementById('cartContainer');
            
            if (cart.length === 0) {
                container.innerHTML = '<div class="empty-cart">Корзина пуста</div>';
                document.getElementById('cartTotal').textContent = 'Итого: 0 ₽';
                return;
            }
            
            container.innerHTML = '';
            let total = 0;
            
            cart.forEach(item => {
                const cartItemElement = document.createElement('div');
                cartItemElement.className = 'cart-item';
                
                const addonsText = item.addons.length > 0 
                    ? `Допы: ${item.addons.join(', ')}`
                    : '';
                
                cartItemElement.innerHTML = `
                    <div class="cart-item-info">
                        <div class="cart-item-name" onclick="openCartItemModal(${item.id})">${item.product.name}</div>
                        <div class="cart-item-addons">${addonsText}</div>
                        <div class="cart-item-price">${item.totalPrice} ₽</div>
                    </div>
                    <div class="cart-item-controls">
                        <button class="quantity-btn" onclick="changeQuantity(${item.id}, -1)">-</button>
                        <span>${item.quantity}</span>
                        <button class="quantity-btn" onclick="changeQuantity(${item.id}, 1)">+</button>
                        <button class="quantity-btn" onclick="removeFromCart(${item.id})" style="background-color: #d32f2f; margin-left: 1rem;">×</button>
                    </div>
                `;
                
                container.appendChild(cartItemElement);
                total += item.totalPrice * item.quantity;
            });
            
            document.getElementById('cartTotal').textContent = `Итого: ${total} ₽`;
        }

        // Открыть модальное окно товара из корзины
        function openCartItemModal(itemId) {
            const item = cart.find(i => i.id === itemId);
            if (!item) return;
            
            const product = item.product;
            currentCoffee = { ...product, id: item.id };
            selectedAddons = [...item.addons];
            isViewMode = true; // Включаем режим просмотра
            
            document.getElementById('modalImg').src = product.image;
            document.getElementById('modalImg').onerror = function() {
                this.style.backgroundColor = 'var(--brown)';
                this.alt = 'Изображение временно недоступно';
            };
            document.getElementById('modalTitle').textContent = product.name;
            document.getElementById('modalDescription').textContent = product.description;
            
            // Показываем полную стоимость с допингами
            let totalPrice = product.price;
            selectedAddons.forEach(addonName => {
                totalPrice += addonsData[addonName].price;
            });
            document.getElementById('modalPrice').textContent = `${totalPrice} ₽`;
            
            // Рендерим БЖУ с учетом допингов
            renderNutrition(product.nutrition);
            
            // Для кофе показываем допинги, для десертов скрываем
            if (product.type === 'coffee') {
                renderAddonsForCartItem(product.addons, item.addons);
                document.querySelector('.addons-section').style.display = 'block';
            } else {
                document.querySelector('.addons-section').style.display = 'none';
            }
            
            // Скрываем кнопку добавления в корзину и показываем кнопку редактирования
            document.getElementById('addToCartBtn').style.display = 'block';
            document.getElementById('addToCartBtn').textContent = 'Изменить товар';
            document.getElementById('addToCartBtn').onclick = function() {
                editCartItem(itemId);
            };
            
            document.getElementById('coffeeModal').style.display = 'flex';
        }

        // Рендер допингов для товара из корзины
        function renderAddonsForCartItem(addons, selectedAddons) {
            const grid = document.getElementById('addonsGrid');
            grid.innerHTML = '';
            
            addons.forEach((addonName, index) => {
                const isSelected = selectedAddons.some(a => a === addonName);
                const addonElement = document.createElement('div');
                addonElement.className = `addon-item ${isSelected ? 'selected' : ''}`;
                addonElement.innerHTML = `
                    <div class="addon-name">${addonName}</div>
                    <div class="addon-price">+${addonsData[addonName].price} ₽</div>
                `;
                // Отключаем возможность выбора допингов в режиме просмотра
                addonElement.style.cursor = 'default';
                grid.appendChild(addonElement);
            });
        }

        // Редактировать товар в корзине
        function editCartItem(itemId) {
            const itemIndex = cart.findIndex(i => i.id === itemId);
            if (itemIndex === -1) return;
            
            // Удаляем старый товар
            cart.splice(itemIndex, 1);
            
            // Добавляем новый с текущими настройками
            let totalPrice = currentCoffee.price;
            selectedAddons.forEach(addonName => {
                totalPrice += addonsData[addonName].price;
            });
            
            const cartItem = {
                id: Date.now(),
                product: currentCoffee,
                addons: [...selectedAddons],
                quantity: 1,
                totalPrice: totalPrice
            };
            
            cart.push(cartItem);
            updateCartCount();
            renderCart();
            closeModal();
            
            showNotification(`${currentCoffee.name} изменен в корзине!`);
        }

        // Изменить количество товара
        function changeQuantity(itemId, change) {
            const item = cart.find(i => i.id === itemId);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(itemId);
                } else {
                    updateCartCount();
                    renderCart();
                }
            }
        }

        // Удалить из корзины
        function removeFromCart(itemId) {
            cart = cart.filter(item => item.id !== itemId);
            updateCartCount();
            renderCart();
        }

        // Рассчитать общее БЖУ заказа
        function calculateOrderNutrition() {
            let totalNutrition = {
                calories: 0,
                protein: 0,
                fat: 0,
                carbs: 0
            };
            
            cart.forEach(item => {
                // Добавляем БЖУ основного продукта
                totalNutrition.calories += item.product.nutrition.calories * item.quantity;
                totalNutrition.protein += item.product.nutrition.protein * item.quantity;
                totalNutrition.fat += item.product.nutrition.fat * item.quantity;
                totalNutrition.carbs += item.product.nutrition.carbs * item.quantity;
                
                // Добавляем БЖУ допингов
                item.addons.forEach(addonName => {
                    const addon = addonsData[addonName];
                    if (addon && addon.nutrition) {
                        totalNutrition.calories += addon.nutrition.calories * item.quantity;
                        totalNutrition.protein += addon.nutrition.protein * item.quantity;
                        totalNutrition.fat += addon.nutrition.fat * item.quantity;
                        totalNutrition.carbs += addon.nutrition.carbs * item.quantity;
                    }
                });
            });
            
            return totalNutrition;
        }

        // Оформить заказ
        function checkout() {
            if (cart.length === 0) {
                alert('Корзина пуста!');
                return;
            }
            
            const total = cart.reduce((sum, item) => sum + (item.totalPrice * item.quantity), 0);
            
            // Рассчитываем общее БЖУ заказа
            const orderNutrition = calculateOrderNutrition();
            
            // Показываем анимацию успешного заказа с формой доставки
            showOrderSuccess(total, orderNutrition);
        }

        // Показать анимацию успешного заказа с формой доставки
        function showOrderSuccess(total, nutrition) {
            document.getElementById('successMessage').textContent = `Ваш заказ на сумму ${total} ₽ принят!`;
            
            // Показываем форму доставки
            document.getElementById('deliveryForm').style.display = 'block';
            
            // Отображаем БЖУ заказа
            const nutritionElement = document.getElementById('orderNutrition');
            nutritionElement.innerHTML = `
                <div style="background: rgba(141, 110, 99, 0.3); padding: 1rem; border-radius: 8px; display: inline-block;">
                    <h3 style="color: var(--beige); margin-bottom: 0.5rem;">Пищевая ценность заказа:</h3>
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem;">
                        <div style="text-align: center;">
                            <div style="font-size: 1.2rem; font-weight: bold; color: var(--brown);">${Math.round(nutrition.calories)}</div>
                            <div style="font-size: 0.8rem; color: var(--light-beige);">ккал</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 1.2rem; font-weight: bold; color: var(--beige);">${nutrition.protein.toFixed(1)}г</div>
                            <div style="font-size: 0.8rem; color: var(--light-beige);">белки</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 1.2rem; font-weight: bold; color: var(--beige);">${nutrition.fat.toFixed(1)}г</div>
                            <div style="font-size: 0.8rem; color: var(--light-beige);">жиры</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 1.2rem; font-weight: bold; color: var(--beige);">${nutrition.carbs.toFixed(1)}г</div>
                            <div style="font-size: 0.8rem; color: var(--light-beige);">углеводы</div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('orderSuccess').classList.add('active');
            document.body.style.overflow = 'hidden'; // Блокируем прокрутку
        }

        // Подтвердить заказ с данными доставки
        function confirmOrder() {
            const name = document.getElementById('customerName').value.trim();
            const phone = document.getElementById('customerPhone').value.trim();
            const address = document.getElementById('deliveryAddress').value.trim();
            
            if (!name || !phone || !address) {
                alert('Пожалуйста, заполните все обязательные поля: имя, телефон и адрес доставки');
                return;
            }
            
            // Здесь можно отправить данные на сервер
            const deliveryData = {
                name: name,
                phone: phone,
                address: address,
                deliveryTime: document.getElementById('deliveryTime').value,
                specificTime: document.getElementById('specificTime').value,
                comments: document.getElementById('orderComments').value.trim()
            };
            
            console.log('Данные доставки:', deliveryData);
            
            // Очищаем корзину после подтверждения заказа
            cart = [];
            updateCartCount();
            renderCart();
            
            // Показываем финальное сообщение
            document.getElementById('deliveryForm').style.display = 'none';
            document.getElementById('successMessage').textContent = `Спасибо, ${name}! Ваш заказ передан в доставку. Ожидайте в течение 30 минут!`;
            document.getElementById('successMessage').style.color = 'var(--beige)';
            
            // Меняем кнопку
            const successBtn = document.querySelector('.success-btn');
            successBtn.textContent = 'Сделать новый заказ';
            successBtn.onclick = function() {
                closeOrderSuccess();
                showPage('menu');
            };
        }

        // Закрыть анимацию успешного заказа
        function closeOrderSuccess() {
            document.getElementById('orderSuccess').classList.remove('active');
            document.body.style.overflow = ''; // Разблокируем прокрутку
            
            // Сбрасываем форму
            document.getElementById('deliveryForm').style.display = 'block';
            document.getElementById('customerName').value = '';
            document.getElementById('customerPhone').value = '';
            document.getElementById('deliveryAddress').value = '';
            document.getElementById('deliveryTime').value = 'asap';
            document.getElementById('specificTimeGroup').style.display = 'none';
            document.getElementById('orderComments').value = '';
            
            // Восстанавливаем оригинальное сообщение и кнопку
            document.getElementById('successMessage').textContent = 'Ваш кофе уже готовится и скоро будет у вас!';
            document.getElementById('successMessage').style.color = '';
            
            const successBtn = document.querySelector('.success-btn');
            successBtn.textContent = 'Продолжить покупки';
            successBtn.onclick = closeOrderSuccess;
            
            showPage('home');
        }

        // Добавление CSS анимации для уведомлений
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>

</html>

